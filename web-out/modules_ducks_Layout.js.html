<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: modules/ducks/Layout.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: modules/ducks/Layout.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React from "react";
import ProjectListComponent from "../../routes/Project/components/ProjectListComponent";
import {mainKey} from "LAYOUTS/CoreLayout";
const SET_STATE = "Layout/SET_STATE";
const SET_ACTIVE_KEY = "Layout/SET_ACTIVE_KEY";
const ADD_TAB = "Layout/ADD_TAB";
const REMOVE_TAB = 'Layout/REMOVE_TAB';

const initialState = {
    panes: [],
    activeKey: "",
};
/**
 * 判断数组里是否包含含有某个键的元素
 * @param key 需要搜索的键
 * @param panes 目标数组
 * @returns {boolean} 如果数组中存在该元素则返回true，否则false
 */
const  containsPane = (key, panes) => {
    for(let i=0; i&lt;panes.length; i++) {
        if(key === panes[i].key) {
            return true;
        }
    }
    return false;
};

export const LayoutReducer = (state = initialState, action) =>{
    switch(action.type) {
        case SET_ACTIVE_KEY:
            return {
                ...state,
                activeKey: action.payload
            };
        case ADD_TAB: {
            // debugger;
            const panes = state.panes.slice();
            const {key, name, component, props} = action.payload;
            if (!containsPane(key, panes)) {
                panes.push({title: name, content: React.createElement(component, props), key: key});
            }
            return {
                panes: panes,
                activeKey: key,
            };
        }
        case REMOVE_TAB:
            let lastIndex = -1;
            const targetKey = action.payload;
            let {panes, activeKey} = state;
            panes.forEach((pane, i) => {
                if (pane.key === targetKey) {
                    lastIndex = i - 1;
                }
            });
            panes = panes.filter(pane => pane.key !== targetKey);
            if (lastIndex >= 0 &amp;&amp; activeKey === targetKey) {
                activeKey = panes[lastIndex].key;
            }
            else if (lastIndex &lt; 0 &amp;&amp; panes.length > 0) {
                activeKey = panes[0].key;
            }
            else {
                activeKey = "";
            }
            return {
                panes: panes,
                activeKey: activeKey,
            };
        default:
            return state;
    }
};

export const setActiveKey = (activekey) => {
    return {
        type: SET_ACTIVE_KEY,
        payload: activekey
    }
};

export const addTabAction = (key, name, component, props) => {
    return {
        type: ADD_TAB,
        payload: {
            key: key,
            name: name,
            component: component,
            props: props,
        },
    }
};

export const removeTabAction = (key) => {
    return {
        type: REMOVE_TAB,
        payload: key,
    }
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AppComponent.html">AppComponent</a></li><li><a href="EditableCell.html">EditableCell</a></li><li><a href="TestProblemReducer.html">TestProblemReducer</a></li></ul><h3>Global</h3><ul><li><a href="global.html#containsPane">containsPane</a></li><li><a href="global.html#mapStateToProps">mapStateToProps</a></li><li><a href="global.html#render">render</a></li><li><a href="global.html#tabsMap">tabsMap</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Jul 16 2018 09:40:29 GMT+0800 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
