<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: routes/TestReport/components/TestReportContentComponent.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: routes/TestReport/components/TestReportContentComponent.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>//export default Form.create()(TestReportContentComponent);
import React, {Component, PropTypes} from 'react';
import {Row, Col, Card, Tabs, Select, Button, Layout, Form, Input,Radio,Checkbox,Icon,DatePicker,Collapse,message,Table,Popconfirm} from 'antd';
const TabPane = Tabs.TabPane;
const Option=Select.Option;
const OptGroup=Select.OptGroup;
const FormItem=Form.Item;
const RadioGroup = Radio.Group;
const CheckboxGroup = Checkbox.Group;
const { TextArea } = Input;

function handleChange(value) {
    console.log(`selected ${value}`);
}


class TestReportContentComponent extends Component {
    constructor(props) {
        super(props);

        this.state = {

        };

    };
    onCellChange = (key, dataIndex) => {
        return (value) => {
            const dataSource = [...this.state.dataSource];
            const target = dataSource.find(item => item.key === key);
            if (target) {
                target[dataIndex] = value;
                this.setState({ dataSource });
            }
        };
    }
    onDelete = (key) => {
        const dataSource = [...this.state.dataSource];
        this.setState({ dataSource: dataSource.filter(item => item.key !== key) });
    }

    static defaultProps = {
	curID : '',
        values : {},
        disable:false,
        buttons: [],
    };

    static propTypes = {
        getValues: PropTypes.func.isRequired,
        disable: PropTypes.bool.isRequired,
        buttons: PropTypes.array.isRequired,
        form: PropTypes.object.isRequired,
    };

    componentWillMount() {
        this.props.getValues(this.props.testReportData.id);
        let state = this.state;
        state.dataSource = this.props.values["functionList"];
        if (state.dataSource === undefined)
            state.dataSource = [];
        state.count = state.dataSource.length;
        this.setState(state);
    };


    onClick = (buttonIndex) => () => {
        this.props.form.validateFields((err, values) => {
            if (!err) {
                this.props.buttons[buttonIndex].onClick(this.props.testReportData, JSON.stringify(values));
            }
        });
        const {buttons, form} = this.props;
        let fieldsValue = form.getFieldsValue();
        fieldsValue["functionList"] = this.state.dataSource;
        // buttons[buttonIndex].onClick(JSON.stringify(form.getFieldsValue()));
    };


    /**
     *  formItemLayout：定义form的大小；dataSource1：从后台得到硬件环境表格的数据；columns1：定义硬件环境表格的格式
     *  dataSource2：从后台得到软件环境表格的数据；columns2：定义软件环境表格的格式
     *  dataSource3：从后台得到功能性测试表格的数据；columns3：定义功能性测试表格的格式
     *  dataSource4：从后台得到非功能性测试表格的数据；columns4：定义非功能性测试表格的格式
     *  return是前端显示页面的html
     */
    render() {
        const { getFieldDecorator } = this.props.form;
        //const { dataSource } = this.state;
        //const columns = this.columns;
        const formItemLayout =  {
            labelCol: { span: 4 },
            wrapperCol: { span: 19 },
        };

        const dataSource1 = JSON.parse(this.props.projectData.testPlan.body).hardware;
        const columns1 = [{
            title: '序号',
            dataIndex: 'number',
            key: 'number',
        }, {
            title: '硬件名称',
            dataIndex: 'name',
            key: 'name',
        }, {
            title: '硬件类别',
            dataIndex: 'kind',
            key: 'kind',
        }, {
            title: '配置',
            dataIndex: 'description',
            key: 'description',
        }, {
            title: '数量',
            dataIndex: 'amount',
            key: 'amount',
        }];

        const dataSource2 = JSON.parse(this.props.projectData.testPlan.body).software;
        const columns2 = [{
            title: '序号',
            dataIndex: 'softwarenumber',
            key: 'softwarenumber',
        }, {
            title: '软件名称',
            dataIndex: 'softwarename',
            key: 'softwarename',
        }, {
            title: '软件类别',
            dataIndex: 'softwarekind',
            key: 'softwarekind',
        }, {
            title: '软件版本',
            dataIndex: 'softwareversion',
            key: 'softwareversion',
        },];

        const dataSource3 = [];
        const columns3 = [{
            title: '序号',
            dataIndex: 'functionalnumber',
            key: 'functionalnumber',
        }, {
            title: '功能模块',
            dataIndex: 'functionalmodule',
            key: 'softwarename',
        }, {
            title: '功能要求',
            dataIndex: 'functionalrequirements',
            key: 'functionalrequirements',
        }, {
            title: '测试结果',
            dataIndex: 'testresult',
            key: 'testresult',
        },];

        const dataSource4 = [];
        const columns4 = [{
            title: '类别',
            dataIndex: 'notfunctionalkind',
            key: 'notfunctionalkind',
        },{
            title: '序号',
            dataIndex: 'notfunctionalnumber',
            key: 'notfunctionalnumber',
        }, {
            title: '测试特性',
            dataIndex: 'testcharacteristics',
            key: 'testcharacteristics',
        }, {
            title: '测试说明',
            dataIndex: 'testinstructions',
            key: 'testinstructions',
        }, {
            title: '测试结果',
            dataIndex: 'notfunctionaltestresult',
            key: 'notfunctionaltestresult',
        },];

        return(
            &lt;Form onSubmit={this.handleSubmit} >

                &lt;FormItem>
                    &lt;h1 style={{textAlign:'center'}}>测试报告&lt;/h1>
                &lt;/FormItem>

                &lt;div>
                    &lt;Tabs
                        defaultActiveKey="1"
                        tabPosition="left"

                    >
                        &lt;TabPane tab="基本信息" key="1">
		 &lt;FormItem {...formItemLayout} label={"委托单位"}>
                            {getFieldDecorator('consignUnitC', {
                                rules: [{ required: false, message: '请正确输入委托单位！' ,pattern:"^[\u4E00-\u9FA5]+$"}],
                                initialValue: this.props.values.consignUnitC
                            })(
                                &lt;Input disabled={this.props.disable}/>
                            )}
                        &lt;/FormItem>

		 &lt;FormItem {...formItemLayout} label={"项目编号"}>
                            {getFieldDecorator('sampleNumber', {
                                rules: [{ required: false, message: '请正确输入项目编号！' ,pattern:"^[A-Za-z]+$"}],
                                initialValue: this.props.values.sampleNumber
                            })(
                                &lt;Input disabled={this.props.disable}/>
                            )}
                        &lt;/FormItem>

						 &lt;FormItem {...formItemLayout} label={"样品名称"}>
                            {getFieldDecorator('sampleName', {
                                rules: [{ required: false, message: '请正确输入样品名称！' ,pattern:"^[\u4E00-\u9FA5]+$"}],
                                initialValue: this.props.values.sampleName
                            })(
                                &lt;Input disabled={this.props.disable}/>
                            )}
                        &lt;/FormItem>

                        &lt;FormItem {...formItemLayout} label={"版本/型号"}>
                            {getFieldDecorator('versionModel', {
                                rules: [{ required: false, message: '请正确输入版本/型号！',pattern:"^[a-zA-Z0-9/.]+$" }],
                                initialValue: this.props.values.versionModel
                            })(
                                &lt;Input disabled={this.props.disable}/>
                            )}
                        &lt;/FormItem>

						 &lt;FormItem {...formItemLayout} label={"来样日期"}>
                            {getFieldDecorator('receiveTime', {
                                rules: [{ required: false, message: '请正确输入来样日期！',pattern:"^[a-zA-Z0-9/.]+$" }],
                                initialValue: this.props.values.receiveTime
                            })(
                                &lt;Input disabled={this.props.disable}/>
                            )}
                        &lt;/FormItem>

						 &lt;FormItem {...formItemLayout} label={"测试类型"}>
                            {getFieldDecorator('testKind', {
                                rules: [{ required: false, message: '请正确输入测试类型！',pattern:"^[\u4E00-\u9FA5A-Za-z]+$" }],
                                initialValue: this.props.values.testKind
                            })(
                                &lt;Input disabled={this.props.disable}/>
                            )}
                        &lt;/FormItem>

						 &lt;FormItem {...formItemLayout} label={"测试时间"}>
                            {getFieldDecorator('testTime', {
                                rules: [{ required: false, message: '请正确输入测试时间！',pattern:"^[a-zA-Z0-9/.]+$" }],
                                initialValue: this.props.values.testTime
                            })(
                                &lt;Input disabled={this.props.disable}/>
                            )}
                        &lt;/FormItem>

						 &lt;FormItem {...formItemLayout} label={"测试依据"}>
                            {getFieldDecorator('testBasis', {
                                rules: [{ required: false, message: '请正确输入测试依据！',pattern:"^[\u4E00-\u9FA5A-Za-z]+$" }],
                                initialValue: this.props.values.testBasis
                            })(
                                &lt;Input disabled={this.props.disable}/>
                            )}
                        &lt;/FormItem>


						&lt;FormItem
                            label="样品清单"
                            {...formItemLayout}
                        >
                            &lt;span className="ant-form-text">&lt;/span>
                        &lt;/FormItem>

						 &lt;FormItem {...formItemLayout} label={"软件样本"}>
                            {getFieldDecorator('softwareSample', {
                                rules: [{ required: false, message: '请正确输入软件样本！',pattern:"^[\u4E00-\u9FA5A-Za-z]+$" }],
                                initialValue: this.props.values.softwareSample
                            })(
                                &lt;Input disabled={this.props.disable}/>
                            )}
                        &lt;/FormItem>


						 &lt;FormItem {...formItemLayout} label={"软件文档"}>
                            {getFieldDecorator('softwareDoc', {
                                rules: [{ required: false, message: '请正确输入软件文档！',pattern:"^[\u4E00-\u9FA5A-Za-z]+$" }],
                                initialValue: this.props.values.softwareDoc
                            })(
                                &lt;Input disabled={this.props.disable}/>
                            )}
                        &lt;/FormItem>


						 &lt;FormItem {...formItemLayout} label={"测试结论"}>
                            {getFieldDecorator('testConclusion', {
                                rules: [{ required: false, message: '请正确输入测试结论！',pattern:"^[\u4E00-\u9FA5A-Za-z]+$" }],
                                initialValue: this.props.values.testConclusion
                            })(
                                &lt;Input disabled={this.props.disable}/>
                            )}
                        &lt;/FormItem>

						 &lt;FormItem {...formItemLayout} label={"主测人"}>
                            {getFieldDecorator('masterMeasuringMan', {
                                rules: [{ required: false, message: '请正确输入主测人！',pattern:"^[\u4E00-\u9FA5A-Za-z]+$" }],
                                initialValue: this.props.values.masterMeasuringMan
                            })(
                                &lt;Input disabled={this.props.disable}/>
                            )}
                        &lt;/FormItem>

						 &lt;FormItem {...formItemLayout} label={"审核人"}>
                            {getFieldDecorator('Auditor', {
                                rules: [{ required: false, message: '请正确输入审核人！',pattern:"^[\u4E00-\u9FA5A-Za-z]+$" }],
                                initialValue: this.props.values.Auditor
                            })(
                                &lt;Input disabled={this.props.disable}/>
                            )}
                        &lt;/FormItem>

						 &lt;FormItem {...formItemLayout} label={"批准人"}>
                            {getFieldDecorator('Approver', {
                                rules: [{ required: false, message: '请正确输入批准人"！',pattern:"^[\u4E00-\u9FA5A-Za-z]+$" }],
                                initialValue: this.props.values.Approver
                            })(
                                &lt;Input disabled={this.props.disable}/>
                            )}
                        &lt;/FormItem>




                        &lt;FormItem {...formItemLayout} label={"测试单位联系方式"}>
                            {getFieldDecorator('testUnitContactMode', {
                                rules: [{ required: false, message: '请输入！' }],
                                initialValue: this.props.values.testUnitContactMode
                            })(
                                &lt;TextArea disabled={this.props.disable}
                                          rows={"4"}  placeholder="请输入软件用户对象描述"/>
                            )}
                        &lt;/FormItem>


                        &lt;FormItem
                            label="电话"
                            {...formItemLayout}
                        >
                            {getFieldDecorator('consignUnittelephone', {
                                rules: [{ required: false, message: '请输入委托单位信息！',pattern:"^[a-zA-Z0-9/.]+$" }],
                                initialValue: this.props.values.consignUnittelephone
                            })(
                                &lt;Input placeholder="请输入电话号码" />
                            )}
                        &lt;/FormItem>

                        &lt;FormItem
                            label="传真"
                            {...formItemLayout}
                        >
                            {getFieldDecorator('consignUnitFax', {
                                rules: [{ required: false, message: '请输入传真号！',pattern:"^[a-zA-Z0-9/.]+$" }],
                                initialValue: this.props.values.consignUnitFax
                            })(
                                &lt;Input placeholder="请输入传真号" />
                            )}

                        &lt;/FormItem>

                        &lt;FormItem
                            label="地址"
                            {...formItemLayout}
                        >
                            {getFieldDecorator('consignUnitaddress', {
                                rules: [{ required: false, message: '请输入地址！',pattern:"^[\u4E00-\u9FA5A-Za-z]+$"}],
                                initialValue: this.props.values.consignUnitaddress
                            })(
                                &lt;Input placeholder="请输入地址" />
                            )}
                        &lt;/FormItem>

                        &lt;FormItem
                            label="邮编"
                            {...formItemLayout}
                        >
                            {getFieldDecorator('consignUnitEmailnumber', {
                                rules: [{ required: false, message: '请输入邮编！',pattern:"^[a-zA-Z0-9/.]+$" }],
                                initialValue: this.props.values.consignUnitEmailnumber
                            })(
                                &lt;Input placeholder="请输入邮编" />
                            )}
                        &lt;/FormItem>

                        &lt;FormItem
                            label="联系人"
                            {...formItemLayout}
                        >
                            {getFieldDecorator('consignUnitpeople', {
                                rules: [{ required: false, message: '请输入联系人！',pattern:"^[\u4E00-\u9FA5A-Za-z]+$"}],
                                initialValue: this.props.values.consignUnitpeople
                            })(
                                &lt;Input placeholder="请输入联系人" />
                            )}
                        &lt;/FormItem>



                        &lt;FormItem
                            label="E-mail"
                            {...formItemLayout}
                        >
                            {getFieldDecorator('consignUnitEmail', {
                                rules: [{ required: false, message: '请输入E-mail！',pattern:"^[a-zA-Z0-9/.]+$" }],
                                initialValue: this.props.values.consignUnitEmail
                            })(
                                &lt;Input placeholder="请输入邮箱地址" />
                            )}
                        &lt;/FormItem>

                        &lt;/TabPane>
                        &lt;TabPane tab="测试环境" key="2">

                            &lt;FormItem
                                label="硬件环境"
                                {...formItemLayout}
                            >
                                &lt;span className="ant-form-text">&lt;/span>
                            &lt;/FormItem>

                            &lt;Table dataSource={dataSource1} columns={columns1} />

                            &lt;FormItem
                                label="软件环境"
                                {...formItemLayout}
                            >
                                &lt;span className="ant-form-text">&lt;/span>
                            &lt;/FormItem>

                            &lt;Table dataSource={dataSource2} columns={columns2} />


                        &lt;/TabPane>


                       &lt;TabPane tab="测试依据和参考资料" key="3">
                           &lt;FormItem {...formItemLayout} label={"测试依据"}>
                               {getFieldDecorator('testBasic', {
                                   rules: [{ required: false, message: '请正确输入测试依据！' ,pattern:"^[\u4E00-\u9FA5]+$"}],
                                   initialValue: this.props.values.testBasic
                               })(
                                   &lt;Input disabled={this.props.disable}/>
                               )}
                           &lt;/FormItem>

                           &lt;FormItem {...formItemLayout} label={"参考资料"}>
                               {getFieldDecorator('referenceContent', {
                                   rules: [{ required: false, message: '请正确输入参考资料！' ,pattern:"^[A-Za-z]+$"}],
                                   initialValue: this.props.values.referenceContent
                               })(
                                   &lt;Input disabled={this.props.disable}/>
                               )}
                           &lt;/FormItem>

                       &lt;/TabPane>
                        {/*&lt;TabPane tab="测试内容" key="4">*/}

                            {/*&lt;FormItem*/}
                                {/*label="功能性测试"*/}
                                {/*{...formItemLayout}*/}
                            {/*>*/}
                                {/*&lt;span className="ant-form-text">&lt;/span>*/}
                            {/*&lt;/FormItem>*/}

                            {/*&lt;Table dataSource={dataSource3} columns={columns3} />*/}

                            {/*&lt;FormItem*/}
                                {/*label="非功能性测试"*/}
                                {/*{...formItemLayout}*/}
                            {/*>*/}
                                {/*&lt;span className="ant-form-text">&lt;/span>*/}
                            {/*&lt;/FormItem>*/}

                            {/*&lt;Table dataSource={dataSource4} columns={columns4} />*/}


                        {/*&lt;/TabPane>*/}
                    &lt;/Tabs>
                &lt;/div>
                &lt;FormItem style={{textAlign:'center'}}>
                    {this.props.buttons.map((button, index) => {
                        let buttonCanShow = false;
                        this.props.buttonsEnable.forEach(function(element){
                            if(element.content === button.content &amp;&amp; element.enable){
                                buttonCanShow = true;
                            }});
                        if(buttonCanShow){
                            return &lt;Button
                                //disabled={this.props.buttonDisabled}
                                onClick={this.onClick(index)}
                                key={button.content}>
                                {button.content}
                            &lt;/Button>
                        }
                    })}
                &lt;/FormItem>





        &lt;/Form>






        );
    }
}
export default Form.create()(TestReportContentComponent);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AppComponent.html">AppComponent</a></li><li><a href="ConsignContentComponent.html">ConsignContentComponent</a></li><li><a href="EditableCell.html">EditableCell</a></li><li><a href="TestProblemReducer.html">TestProblemReducer</a></li></ul><h3>Global</h3><ul><li><a href="global.html#containsPane">containsPane</a></li><li><a href="global.html#mapStateToProps">mapStateToProps</a></li><li><a href="global.html#render">render</a></li><li><a href="global.html#TabPane">TabPane</a></li><li><a href="global.html#tabsMap">tabsMap</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Jul 16 2018 11:11:46 GMT+0800 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
