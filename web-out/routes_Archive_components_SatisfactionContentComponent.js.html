<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: routes/Archive/components/SatisfactionContentComponent.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: routes/Archive/components/SatisfactionContentComponent.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, {Component, PropTypes} from 'react';
import {Row, Col, Button, Rate, Form, Input,Radio, InputNumber} from 'antd';

const FormItem=Form.Item;
const RadioGroup = Radio.Group;
const { TextArea } = Input;

/**
 * SatisfactionContentComponent类，实现了满意度调查表的具体表单内容。
 */
class SatisfactionContentComponent extends Component {
    /**
     * 构造器
     * @param props
     */
    constructor(props) {
        super(props);
    }

    /**
     * 若上个界面没有传值，则使用这个默认props
     * @type {{values: {}, disable: boolean, buttons: Array}}
     */
    static defaultProps = {
        values: {},
        disable:false,
        buttons: [],
    };

    /**
     * 对props里面的属性进行类型判断，isRequired指定必填项
     * @type {{satisfactionData: *, values: * , disableC: *, disableQ: *, buttons: *, form: *}}
     */
    static propTypes = {
        satisfactionData: PropTypes.object.isRequired,
        values: PropTypes.object.isRequired,
        disableC: PropTypes.bool.isRequired,
        disableQ: PropTypes.bool.isRequired,
        buttons: PropTypes.array.isRequired,
        form: PropTypes.object.isRequired,
    };

    /**
     * 点击button的回调函数
     * @func
     * @param {Number} buttonIndex - 所点击的button的编号
     * @returns {Function} 保存表单各部分的值。
     */
    onClick = (buttonIndex) => () => {
        // this.props.form.validateFields((err, values) => {
        //     if (!err) {
        //         this.props.buttons[buttonIndex].onClick(this.props.consignData, JSON.stringify(values));
        //     }
        // });
        const {buttons, form} = this.props;
        buttons[buttonIndex].onClick(this.props.satisfactionData, JSON.stringify(form.getFieldsValue()));
    };

    /**
     *
     * 满意度调查表表单组件的render函数。
     * 其中formItemLayout、rowStyle、tipStyle以CSS语言定义了各种组件的样式；
     * 返回"满意度调查表"表单详情的html代码，包括客户满意度调查、测试中心满意度计算和满意度调查说明。
     */
    render() {
        const { getFieldDecorator } = this.props.form;
        const formItemLayout =  {
            labelCol: { span: 4 },
            wrapperCol: { span: 20 },
            marginBottom: 0,
        };

        const rowStyle = {
            marginBottom: '10pt',
        };

        const tipStyle = {
            color: 'red',
        };

        return(
            &lt;Form onSubmit={this.handleSubmit} hideRequiredMark={true}>
                &lt;h1 style={{textAlign:'center'}}>客户满意度调查表&lt;/h1>

                &lt;FormItem {...formItemLayout} label={"单位名称"}>
                    {getFieldDecorator('consignUnit', {
                        rules: [{ required: true, message: '请输入单位名称！' }],
                        initialValue: this.props.consignUnit,
                    })(
                        &lt;Input disabled={true}/>
                    )}
                &lt;/FormItem>

                &lt;FormItem {...formItemLayout} label="被测软件名称">
                    {getFieldDecorator('softwareName', {
                        rules: [{ required: true, message: '请输入被测软件名称！' }],
                        initialValue: this.props.softwareName,
                    })(
                        &lt;Input disabled={true}/>
                    )}
                &lt;/FormItem>

                &lt;FormItem {...formItemLayout}>
                    &lt;h3 style={tipStyle}>以下内容由客户方填写&lt;/h3>
                &lt;/FormItem>

                &lt;FormItem>
                    &lt;Row style = {rowStyle} type="flex" justify="center" gutter={32}>
                        &lt;Col span={10}>
                            &lt;FormItem{...formItemLayout} label={"联系人"}>
                                {getFieldDecorator('contact', {
                                    rules: [{ required: true, message: '请正确输入联系人！' ,pattern:"^[\u4E00-\u9FA5A-Za-z]+$"}],
                                    initialValue: this.props.values.contact,
                                })(
                                    &lt;Input disabled={this.props.disableC}/>
                                )}
                            &lt;/FormItem>
                        &lt;/Col>
                        &lt;Col span={10}>
                            &lt;FormItem {...formItemLayout} label={"联系电话"}>
                                {getFieldDecorator('contactNumber', {
                                    rules: [{ required: true, message: '请正确输入联系电话！' ,pattern:"^(\(\d{3,4}-)|\d{3.4}-)?\d{7,8}$"}],
                                    initialValue: this.props.values.contactNumber,
                                })(
                                    &lt;Input disabled={this.props.disableC} placeholder={"025-89685110"}/>
                                )}
                            &lt;/FormItem>
                        &lt;/Col>
                    &lt;/Row>
                &lt;/FormItem>

                &lt;FormItem>
                    &lt;Row style = {rowStyle} type="flex" justify="center" gutter={32}>
                        &lt;Col span={10}>
                            &lt;FormItem{...formItemLayout} label={"Email"}>
                                {getFieldDecorator('Email', {
                                    rules: [{ required: true, message: '请正确输入Email！' ,pattern:"^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$"}],
                                    initialValue: this.props.values.Email,
                                })(
                                    &lt;Input disabled={this.props.disableC}/>
                                )}
                            &lt;/FormItem>
                        &lt;/Col>
                        &lt;Col span={10}>
                            &lt;FormItem {...formItemLayout} label={"手机"}>
                                {getFieldDecorator('mobilePhone', {
                                    rules: [{ required: true, message: '请正确输入手机号！' ,pattern:"^(13[0-9]|14[0-9]|15[0-9]|166|17[0-9]|18[0-9]|19[8|9])\\d{8}$"}],
                                    initialValue: this.props.values.mobilePhone,
                                })(
                                    &lt;Input disabled={this.props.disableC} placeholder={"15195908360"}/>
                                )}
                            &lt;/FormItem>
                        &lt;/Col>
                    &lt;/Row>
                &lt;/FormItem>

                    &lt;FormItem {...formItemLayout} label={"测试服务响应时间"}>
                        {getFieldDecorator('reflectTime', {
                            initialValue: this.props.values.reflectTime?this.props.values.reflectTime:3.5,
                        })(
                            &lt;Rate  disabled={this.props.disableC} allowHalf/>
                        )}
                    &lt;/FormItem>
                    &lt;FormItem {...formItemLayout} label={"测试服务收费合理性"}>
                        {getFieldDecorator('charge', {
                            initialValue: this.props.values.charge?this.props.values.charge:3.5,
                        })(
                            &lt;Rate  disabled={this.props.disableC}  allowHalf/>
                        )}
                    &lt;/FormItem>
                    &lt;FormItem {...formItemLayout} label={"测试服务规范性"}>
                        {getFieldDecorator('standard', {
                            initialValue: this.props.values.standard?this.props.values.standard:3.5,
                        })(
                            &lt;Rate  disabled={this.props.disableC}  allowHalf/>
                        )}
                    &lt;/FormItem>
                    &lt;FormItem {...formItemLayout} label={"测试服务技术能力"}>
                        {getFieldDecorator('capability', {
                            initialValue: this.props.values.capability?this.props.values.capability:3.5,
                        })(
                            &lt;Rate  disabled={this.props.disableC}  allowHalf/>
                        )}
                    &lt;/FormItem>
                    &lt;FormItem {...formItemLayout} label={"客户需求的了解"}>
                        {getFieldDecorator('understanding', {
                            initialValue: this.props.values.understanding?this.props.values.understanding:3.5,
                        })(
                            &lt;Rate  disabled={this.props.disableC}  allowHalf/>
                        )}
                    &lt;/FormItem>
                    &lt;FormItem {...formItemLayout} label={"服务时的沟通能力"}>
                        {getFieldDecorator('communication', {
                            initialValue: this.props.values.communication?this.props.values.communication:3.5,
                        })(
                            &lt;Rate  disabled={this.props.disableC}  allowHalf/>
                        )}
                    &lt;/FormItem>
                    &lt;FormItem {...formItemLayout} label={"其他意见和建议"}>
                        {getFieldDecorator('advice', {
                            rules: [{
                                required: false
                            }],
                            initialValue: this.props.values.advice,
                        })(
                            &lt;TextArea disabled={this.props.disableC} rows={4} />
                        )}
                    &lt;/FormItem>

                &lt;FormItem/>

                &lt;FormItem {...formItemLayout}>
                    &lt;h3 style={tipStyle}>以下内容由测试中心填写&lt;/h3>
                &lt;/FormItem>

                {/* TODO 如何直接显示数据库中存放的数据并进行计算 */}

                &lt;FormItem {...formItemLayout} label={"满意度计算总值"}>
                    {getFieldDecorator('satisfactionDegree', {
                        rules: [{ required: true, message: '请正确输入满意度！'}],
                        initialValue: this.props.values.satisfactionDegree,
                    })(
                        &lt;InputNumber disabled={this.props.disableQ} min={0} max={100} step={0.1}/>
                    )}
                &lt;/FormItem>

                &lt;FormItem {...formItemLayout} label={"客户满意情况"}>
                    {getFieldDecorator('satisfactionLevel', {
                        rules: [{ required: true, message: '请选择客户满意情况！'}],
                        initialValue: this.props.values.satisfactionLevel
                    })(
                        &lt;RadioGroup disabled={this.props.disableQ}>
                            &lt;Radio value={1}>很满意&lt;/Radio>
                            &lt;Radio value={2}>较满意&lt;/Radio>
                            &lt;Radio value={3}>一般&lt;/Radio>
                            &lt;Radio value={4}>不满意&lt;/Radio>
                            &lt;Radio value={4}>很不满意&lt;/Radio>
                        &lt;/RadioGroup>
                    )}
                &lt;/FormItem>

                &lt;FormItem>
                    &lt;h3>满意度调查说明&lt;/h3>
                    &lt;p>1. 顾客满意度调查表须有客户签名才算有效；&lt;/p>
                    &lt;p>2. 分值表示满意程度：90-100很满意，80-89满意，70-79较满意，50-69不满意，49以下很不满意，≥80分计入满意范畴；&lt;/p>
                    &lt;p>3. 满意度的统计：满意度 = 获得满意的调查表总数 / 有效的调查表总数 × 100%&lt;/p>
                &lt;/FormItem>

                &lt;FormItem/>
                {/* footer buttons */}
                &lt;FormItem {...formItemLayout}>
                    {this.props.buttons.map((button, index) =>
                        &lt;Button onClick={this.onClick(index)}
                                key={button.content}>
                            {button.content}
                        &lt;/Button>)}
                &lt;/FormItem>
            &lt;/Form>

        );

    }
}
export default Form.create()(SatisfactionContentComponent);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AppComponent.html">AppComponent</a></li><li><a href="EditableCell.html">EditableCell</a></li><li><a href="SatisfactionContentComponent.html">SatisfactionContentComponent</a></li><li><a href="TestProblemReducer.html">TestProblemReducer</a></li><li><a href="TestWorkCheckContentComponent.html">TestWorkCheckContentComponent</a></li></ul><h3>Global</h3><ul><li><a href="global.html#mapStateToProps">mapStateToProps</a></li><li><a href="global.html#render">render</a></li><li><a href="global.html#tabsMap">tabsMap</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Jul 16 2018 11:28:53 GMT+0800 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
